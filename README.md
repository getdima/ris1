# ris1

Была разработана распределенная система, состоящая из менеджера и трех воркеров, на которых менеджер распределяет нагрузку по взлому хэша в формате MD-5. Помимо этого, был разработано: фронт для клиента (Django), возможность отслеживать прогресс и создавать JSON-снапшоты очереди и бд (условной). Запущено всё на базе docker compose (к сожалению).

Для запуска необходимо иметь на компьютере установленный Docker Desktop. 
Чтобы запустить приложения, необходимо зайти в корневую папку с терминала и выполнить команду docker-compose up. Для остановки приложения нужно выполнить команду docker-compose down

Чтобы зайти на станицк клиента, необохдимо перейти по адресу http://localhost:8000/crackhash/home/ в браузере

**Работа статуса "Частично" ("PARTIALLY")**
Данный статус проставляется в том момент, когда от любого из воркеров приходит ответ с ненулевым результатом, т.е, если в момент прихода ответа от воркера статус запроса был "IN_PROGRESS", то, если результат от воркера пришёл ненулевой (нашлась расшифрованная строка), статус запроса измениться на "PARTIALLY". Если ответ пришёл с нулевым результатом, то статус остается "IN_PROGRESS". Выходит так, что если какой-либо из воркеров задерживается, но кто-то из остальных уже вернул ненулевой результат, то пользователь увидит, что хоть и результат есть, но запрос ещё не обработан полностью. 

**Работа с JSON-снапшотами**
Был создан класс JSONFileManager, позволяющий записывать или получать данные из json файлов для получения бд или очереди. При инициализации нужно указать пути, в которых будут находиться json файлы для бд и очереди, с которыми будет вестись в дальнейшем работа.

Как происходит работа с json файлом бд:
**Чтение**
При инициализации менеждера происходит обращение с JSONFileManager'у, который пытается открыть файл бд по указанному пути и вернуть словарь. После прочтения файла полученный словарь подается в RequestsBase и переприсывает переменную, отвечающую за данные о запросах.
**Запись**
При любом изменении переменной, отвечающей за данные о запросах, вызывается метод save_base_to_file(), который полностью перезаписывает json файл с бд.

Как происходит работа с json файлом очереди:
**Чтение**
При инициализации менеждера происходит обращение с JSONFileManager'у, который пытается открыть файл очереди по указанному пути и вернуть массив. После этого происходит проход по массиву и добавление каждого элемента в асинхронную очередь.
**Запись**
При попытке удалить или добавить элемент в очередь вызывается метод save_queue(), который имеет два режима "pop" и "put" соответственно. После того, как-либо изменили очередь у менеджера, мы вызывает метод save_queue(), который производит соответствующие изменения в файле очереди. Сначала происходит чтение файла для получение уже записанной коллекции, затем, если был выбран режим "put", то происходит добавление нового элемента в массив, если "pop" - удаление первого элемента в массиве. После работы с массивом происходит пересохранение файла очереди с новыми данными. 
